(()=>{"use strict";const e=(e,t="en")=>{const n={en:{card:{name:"Name",realName:"Real name",citizenship:"Citizenship",species:"Species",gender:"Gender",birthDay:"Birth day",deathDay:"Death day",status:"Status",actors:"Actors",photo:"Photo",movies:"Movies"},filters:{movie:"Movie"}},ru:{card:{name:"Имя",realName:"Настоящее имя",citizenship:"Гражданство",species:"Вид",gender:"Пол",birthDay:"День рождения",deathDay:"День смерти",status:"Статус",actors:"Актёр",photo:"Фотография",movies:"Фильмы"},filters:{movie:"Фильм"}}};return Object.keys(n[t][e]).length?n[t][e]:n.en[e]},t=(e,t="")=>{const n=(e=>document.createElement(e))(e);return n.innerText=t,n},n=e=>fetch(e).then((e=>e.json())).catch((e=>e)),a=(n,a="en")=>{const r=document.getElementById("card-list");r.innerHTML="";try{n.then((s=>{s.forEach((n=>{r.append((n=>{const r=t("div"),s=t("table"),o=`card${(new Date).getTime()}`;r.classList.add(o);for(const r in n){const o=t("tr"),c=t("td"),i=t("td");if(c.innerText=`${e("card",a)[r]}: `,"photo"===r){const e=t("img");e.setAttribute("src",`./data/${n[r]}`),i.append(e)}else i.innerText=n[r];o.append(c),o.append(i),s.append(o)}return r.append(s),r})(n)),r.append(document.createElement("br"))})),r.append(n)}))}catch(e){console.log(e.message)}};window.cardService=new class{getCards(){return n("http://localhost:4545/heroes").then((e=>e))}getFilterCards(e,t){return n(`http://localhost:4545/heroes?${e}_like=${t}`).then((e=>e))}};const r=cardService.getCards();a(r,"ru"),(async(t,n="en")=>{(async(t,n="en")=>{const r=document.getElementById("filter-movies"),s=document.querySelector(".movie-label");let o=[];s.textContent=`${e("filters",n).movie}: `,r.addEventListener("change",(e=>{e.preventDefault();const t=e.target.value;a(cardService.getFilterCards("movies",t))})),await(async()=>{await t.then((e=>{e.forEach((e=>{const t=void 0!==e.movies?e.movies:[];o=((e,t,n=((e,t)=>e===t))=>{const a=[...e];return t.forEach((e=>a.some((t=>n(e,t)))?null:a.push(e))),a})(o,t)}))}))})(),o.forEach((e=>{const t=document.createElement("option");t.value=t.textContent=e,r.appendChild(t)}))})(t,n)})(r,"ru")})();